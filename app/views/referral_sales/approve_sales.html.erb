<div class="dashboard-holder">
  <div class="row">
    <div class="col-md-3">
      <%= render partial: "shared/side_bar" %>
    </div>
    <div class="col-md-9">
      <p id="notice"><%= notice %></p>

      <% if @referral_sales.first.present? %>
          <h1>Referral Sales</h1>
          <table class="table table-striped table-bordered">
            <thead>
            <tr>
              <th>Order Id</th>
              <th>Price</th>
              <th>Customer Name</th>
              <th>Email</th>
              <th>Shop Name</th>
              <th>Address</th>
              <th>Ambassador</th>
              <th>Approve</th>
            </tr>
            </thead>

            <tbody>
            <% @referral_sales.each do |referral_sale| %>
                <tr>
                  <td><%= referral_sale.order_id %></td>
                  <td><%= referral_sale.price %></td>
                  <td><%= referral_sale.name %></td>
                  <td><%= referral_sale.email %></td>
                  <td><%= referral_sale.shopdomain %></td>
                  <td><%= referral_sale.address %></td>
                  <td><%= referral_sale.user.present? ? referral_sale.user.name : "" %></td>
                  <td><input type="checkbox" <%='checked=checked' if referral_sale.is_approved %> onclick="changed_account_paid_state(this, '<%= referral_sale.id %>')"></td>
                </tr>
            <% end %>
            </tbody>
          </table>
      <% else %>
          <h1>No Sales Till Yet</h1>
      <% end %>
    </div>
  </div>
</div>

<%#= link_to 'New Referral Sale', new_referral_sale_path %>
<script>
    function changed_account_paid_state(obj, id){
        is_approved = $(obj).is(':checked')

        $.ajax({
            url:'/changed_account_approved_status?id='+id+ '&value='+is_approved,
            type:'get',
            dataType:'html',
            processData:false,
            success:function (data) {


            },
            error:function (data) {
                alert ('Error');
                //    window.location.reload();
            }
        });
    }
</script>