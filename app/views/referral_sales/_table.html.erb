<% if @referral_sales.first.present? %>
    <table id="bs4-table" class="table table-striped table-bordered" style="width:100%">
      <thead>
      <tr>
        <th></th>
        <th>University code</th>
        <th>Date created</th>
        <th>Customer</th>
        <th>TT Discount</th>
        <th>Total Money</th>
        <th>Discount</th>
        <th>Payment Status</th>
        <th>Partner</th>
        <th>Referral Code</th>
      </tr>
      </thead>

      <tbody>
      <% @referral_sales.each do |referral_sale| %>
          <tr>
            <%     @session = ShopifyAPI::Session.new("saint-messanger.myshopify.com", "7c33c27b13f3e5aa9feb6d8f5db4563c")
                   ShopifyAPI::Base.activate_session(@session) %>
            <% puts "-==-------------------",ShopifyAPI::Order.find(referral_sale.order_id).financial_status.inspect %>
            <td><input id="chk_<%= referral_sale.id %>" name="approve[]" type="checkbox" value="<%= referral_sale.id %>" <%= (referral_sale.is_approved || ShopifyAPI::Order.find(referral_sale.order_id).financial_status == "pending") ? 'disabled': '' %> /></td>
            <td><a href="javascript:void(0);"><%= referral_sale.order_id %></a></td>
            <td><%= referral_sale.created_at %></td>
            <td><%= referral_sale.name %></td>
            <td><%=  %></td>
            <td><%= referral_sale.price%></td>
            <td><%=  %></td>
            <td><%= ShopifyAPI::Order.find(referral_sale.order_id).financial_status %></td>
            <td><%= referral_sale.user.present? ? referral_sale.user.name : "" %></td>
            <td><a href="/user_show?id=<%= referral_sale.user.present? ? referral_sale.user.id : "" %>"><%= referral_sale.user.present? ? referral_sale.user.referral : "" %></a></td></td>
            <% ShopifyAPI::Base.clear_session %>
          </tr>
      <% end %>
      </tbody>
    </table>
<% else %>
    <h1>No Sales Till Yet</h1>
<% end %>

<script>
    $('#bs4-table').DataTable({
        retrieve: true,
        "aaSorting": [],
        'columnDefs' : [     // see https://datatables.net/reference/option/columns.searchable
            {
                'searchable'    : false,
                'targets'       : [2,4,5,6]
            },
        ]
    });
</script>