<div class="nav-side-menu">
  <div class="brand">
    <div class="user-image">
      <div id="updateUserImage">
        <%= render partial: "shared/user_image" %>
        <div class="dropdown ab-dropdown">
          <button class="btn btn-primary dropdown-toggle " type="button" data-toggle="dropdown">
            <span class="caret"></span></button>
          <ul class="dropdown-menu">
            <li> <a href="javascript:void(0);" onclick="uploadImage();">image</a></li>
          </ul>
        </div>
      </div>
    </div>

    <h2> <%= current_user.name %></h2>
  </div>
  <i class="fa fa-bars fa-2x toggle-btn" data-toggle="collapse" data-target="#menu-content"></i>

  <div class="menu-list">

    <ul id="menu-content" class="menu-content collapse out">
      <li class="row">
        <div class="col-md-12">
          <p style="color: gold"> <%= current_user.points.present? ? current_user.points.sum(:point_value).to_i : 0 %> Coins <button style="display: inline-block; border: none; vertical-align: top;margin: 3px 0" data-target="#coinModal" data-toggle="modal" class="btn btn-default"><i class="fa fa-question-circle"></i></button> <span class="pull-right"> <i class="fa fa-money"> </i> <%= current_user.total_income %> Cash</span>

        </div>
      </li>

      <li>
        <a href="/share_with_friends"><i class="fa fa-share-alt fa-lg fa-fw sidebar-icon"></i> Share with friends</a>
      </li>

      <li>
        <a href="/take_snapshot"><i class="fa fa-file-image-o fa-lg fa-fw sidebar-icon"></i> Take a snapshot and share </a>
      </li>

      <% if current_user.role.present? && current_user.role.name != "Buyer" %>
          <li  data-toggle="" data-target="#" class="collapsed">
            <a href="/referral_sales"><i class="fa fa-archive fa-lg fa-fw sidebar-icon"></i> My Sales  </a>
          </li>

          <li  data-toggle="" data-target="#" class="collapsed">
            <a href="/blogs"><i class="fa fa-cart-arrow-down fa-lg fa-fw sidebar-icon"></i> Blogs</a>
          </li>
      <% end %>
      <% if current_user.role.present? && current_user.role.name == "Admin" || current_user.is_shopify_user %>
          <li>
            <a href="/users/brand_ambassadors"><i class="fa fa-bell fa-lg fa-fw sidebar-icon"></i>Commission  </a>
          </li>
          <li>
            <a href="/approve_sales"><i class="fa fa-bell fa-lg fa-fw sidebar-icon"></i>Approve Sales  </a>
          </li>
          <li>
            <a class="auto click-close" href="<%= edit_setting_path(Setting.first) %>">
              <i class="fa fa-gears"></i>
              <span class="ng-binding">Configuration</span>
            </a>
          </li>
          <li class="menu-item ng-scope" ng-repeat="item in menu.items | orderBy: 'position'">
            <a class="auto click-close" href="/payments">
              <i class="fa fa-money"></i>
              <span class="ng-binding">Payment history</span>
            </a>
          </li>
          <li>
            <a href="/users"><i class="fa fa-bell fa-lg fa-fw sidebar-icon"></i>Ambassadors  </a>
          </li>
          <li>
            <a href="/categories"><i class="fa fa-bell fa-lg fa-fw sidebar-icon"></i>Categories  </a>
          </li>
          <li>
            <a href="/point_types"><i class="fa fa-bell fa-lg fa-fw sidebar-icon"></i>Manage Points  </a>
          </li>
      <% end %>
      <li  data-toggle="" data-target="#" class="collapsed">
        <a href="/buyer_orders"><i class="fa fa-truck fa-lg fa-fw sidebar-icon"></i> Buyer's Orders</a>
      </li>


      <!--<li  data-toggle="" data-target="#" class="collapsed">-->
        <!--<a href="#"><i class="fa fa-credit-card-alt fa-lg fa-fw sidebar-icon"></i> Transactions</a>-->
      <!--</li>-->

      <!--<li  data-toggle="" data-target="#" class="collapsed">-->
        <!--<a href="#"><i class="fa fa-life-ring fa-lg fa-fw sidebar-icon"></i> My Order </a>-->
      <!--</li>-->
      <!--<li>-->
        <!--<a href="#"><i class="fa fa-heart fa-lg fa-fw sidebar-icon"></i>Favourties </a>-->
      <!--</li>-->
      <li>
        <a href="/acc_settings"><i class="fa fa-cog fa-lg fa-fw sidebar-icon"></i>Acc settings  </a>
      </li>
      <!--<li>-->
        <!--<a href="#"><i class="fa fa-bell fa-lg fa-fw sidebar-icon"></i>Notification settings  </a>-->
      <!--</li>-->
    </ul>
    <a href="javascript:void(0);" onclick="copyToClipboard('text_element');" class="btn btn-default btn-lg" style="margin-bottom: 20px; margin-left: 30px; margin-top: 10px">Copy Referral Link</a>
  </div>
</div>

<div id="imageUploader" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div id="uploadImage">

      </div>
    </div>

  </div>
</div>
<div id="coinModal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-cu">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-holder">
          <div id="current_user_role">
            <h3 class="text-center">Earn coins and exchange them to discount</h3>
          </div>
          <div class="coin-body">
            <div class="row">
              <div class="col-md-12 text-center">
                <h3>How can you earn coins?</h3>
              </div>
              <div class="col-md-6">
                <p> <span class="">+10</span> <strong>Post the blog</strong></p>
                <p> <span class="">+5</span> <strong>Take and share a snapshot</strong></p>
                <p> <span class="">+15</span> <strong>Order product in the blog post</strong></p>
              </div>
              <div class="col-md-6">
                <p> <span class="">+20</span> <strong> Invite user to the Soint l beou</strong></p>
                <p> <span class="">+15</span> <strong> Invited user spent $50</strong></p>
                <p> <span class="">+15</span> <strong> Your product was ordered </strong></p>
              </div>
            </div>
          </div>

          <div class="coin-body">
            <div class="row  text-center">
              <div class="col-md-12">
                <h3>How can you spend coins?</h3>
                <p>You'll be able to exchange coins during the product order</p>
              </div>
              <div class="col-md-3 col-md-offset-3">
                <h4 class="coin-count">100 coins</h4>
              </div>
              <div class="col-md-1">
                <p class="count-eq">=</p>
              </div>
              <div class="col-md-3 ">
                <h4 class="coin-price">$10</h4>
              </div>
            </div>
            <hr/>
            <div class="row">
              <div class="col-md-12 text-center">
                <p>Or you can promote your blogs</p>
              </div>
            </div>
            <div class="row text-center">
              <div class="col-md-3 col-md-offset-3">
                <h4  class="coin-count">100 coins</h4>
              </div>
              <div class="col-md-1">
                <p class="count-eq">=</p>
              </div>
              <div class="col-md-3 ">
                <h4  class="coin-price">$10</h4>
              </div>
            </div>
          </div>

        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>

<p id="text_element" style="display: none">https://saint-messanger.myshopify.com/?referral_url=<%= current_user.referral %></p>
<script>
    function uploadImage(){
        $.ajax({
            url:'/get_user_object',
            type:'get',
            dataType:'html',
            processData:false,
            success:function (data) {
                $('#imageUploader').modal('show');
                $('#uploadImage').html(data);
            },
            error:function (data) {
                alert ('Error');
                //    window.location.reload();
            }
        });
    }
    function copyToClipboard(elementId) {

        // Create an auxiliary hidden input
        var aux = document.createElement("input");

        // Get the text from the element passed into the input
        aux.setAttribute("value", document.getElementById(elementId).innerHTML);

        // Append the aux input to the body
        document.body.appendChild(aux);

        // Highlight the content
        aux.select();

        // Execute the copy command
        document.execCommand("copy");

        // Remove the input from the body
        document.body.removeChild(aux);

    }
</script>